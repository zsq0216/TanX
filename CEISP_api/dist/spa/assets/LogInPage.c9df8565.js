import{f as v,e as W,k as h,I as X,t as Y,h as m,l as Z,U as G,P as p,g as J,V as K,q as ee,W as te,X as ae,N as oe,o as ie,c as le,w as s,a as i,Y as n,d as _,Z as x,_ as z,$ as B}from"./index.72b74f6b.js";import{u as P}from"./use-timeout.c4e98ea7.js";import{Q as ne,a as re}from"./QLayout.01a6ef7f.js";import{_ as se}from"./bank.0b16faf8.js";import{u as ue,a as ce,Q as de,b as ge}from"./axios.1562a4a6.js";import{Q as q}from"./QCardSection.161fe826.js";import{Q as me}from"./prevent-scroll.e5f540d1.js";import{Q as R}from"./QInput.e2d496c4.js";import{P as I}from"./Loading.f32cb570.js";import"./scroll.7d6d8e83.js";import"./use-dark.d9f79254.js";import"./uid.42677368.js";const fe={ratio:[String,Number]};function ve(e,u){return v(()=>{const r=Number(e.ratio||(u!==void 0?u.value:void 0));return isNaN(r)!==!0&&r>0?{paddingBottom:`${100/r}%`}:null})}const he=1.7778;var V=W({name:"QImg",props:{...fe,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:he},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:u,emit:r}){const S=h(e.initialRatio),c=ve(e,S),y=ee(),{registerTimeout:b,removeTimeout:l}=P(),{registerTimeout:a,removeTimeout:o}=P(),Q=v(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),$=v(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),d=[h(null),h(Q.value)],g=h(0),w=h(!1),k=h(!1),j=v(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),D=v(()=>({width:e.width,height:e.height})),E=v(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),F=v(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function H(){if(o(),e.loadingShowDelay===0){w.value=!0;return}a(()=>{w.value=!0},e.loadingShowDelay)}function T(){o(),w.value=!1}function M({target:t}){p(y)===!1&&(l(),S.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,L(t,1))}function L(t,f){f===1e3||p(y)===!0||(t.complete===!0?U(t):b(()=>{L(t,f+1)},50))}function U(t){p(y)!==!0&&(g.value=g.value^1,d[g.value].value=null,T(),t.getAttribute("__qerror")!=="true"&&(k.value=!1),r("load",t.currentSrc||t.src))}function A(t){l(),T(),k.value=!0,d[g.value].value=$.value,d[g.value^1].value=Q.value,r("error",t)}function N(t){const f=d[t].value,C={key:"img_"+t,class:E.value,style:F.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...f};return g.value===t?Object.assign(C,{class:C.class+"current",onLoad:M,onError:A}):C.class+="loaded",m("div",{class:"q-img__container absolute-full",key:"img"+t},m("img",C))}function O(){return w.value===!1?m("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},J(u[k.value===!0?"error":"default"])):m("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},u.loading!==void 0?u.loading():e.noSpinner===!0?void 0:[m(K,{color:e.spinnerColor,size:e.spinnerSize})])}{let t=function(){Z(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,f=>{l(),k.value=!1,f===null?(T(),d[g.value^1].value=Q.value):H(),d[g.value].value=f},{immediate:!0})};X.value===!0?Y(t):t()}return()=>{const t=[];return c.value!==null&&t.push(m("div",{key:"filler",style:c.value})),d[0].value!==null&&t.push(N(0)),d[1].value!==null&&t.push(N(1)),t.push(m(G,{name:"q-transition--fade"},O)),m("div",{key:"main",class:j.value,style:D.value,role:"img","aria-label":e.alt},t)}}}),Se="/assets/business.e7c251c2.png";const ye=_("div",{class:"text-h5 text-center q-my-md"},"\u8BF7\u9009\u62E9\u767B\u5F55\u7C7B\u578B",-1),_e={class:"row justify-around q-gutter-md"},be=_("div",null,"Business",-1),we=_("div",null,"Bank",-1),Pe={__name:"LogInPage",setup(e){const u=te(),r=ae();ue();const S=h(null),c=oe({username:"",password:""}),y=l=>{S.value=l},b=()=>{I.show(),console.log("im here"),ce.post("http://47.122.24.142:7766/api/token/",c).then(l=>{I.hide();const a=l.data.access;console.log(a),u.dispatch("saveToken",a),z.create({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u767B\u5F55\u6210\u529F"}),l.data.is_Enterprise===!0?(localStorage.setItem("userToken",a),r.push("/personal")):(localStorage.setItem("bankToken",a),r.push("/search"))}).catch(l=>{console.log("failed!"),I.hide(),console.error("Registration error:",l),z.create({color:"red-5",textColor:"white",icon:"error",message:"\u767B\u5F55\u5931\u8D25"})})};return(l,a)=>(ie(),le(ne,null,{default:s(()=>[i(re,null,{default:s(()=>[i(n(de),{class:"flex flex-center"},{default:s(()=>[i(n(ge),{class:"my-card"},{default:s(()=>[i(n(q),null,{default:s(()=>[ye]),_:1}),i(n(q),{class:"q-pt-none"},{default:s(()=>[_("div",_e,[_("div",{class:x([S.value==="business"?"selected":"","account-type"]),onClick:a[0]||(a[0]=o=>y("business"))},[i(V,{square:"",src:Se}),be],2),_("div",{class:x([S.value==="bank"?"selected":"","account-type"]),onClick:a[1]||(a[1]=o=>y("bank"))},[i(V,{square:"",src:se}),we],2)])]),_:1}),i(n(me),{onSubmit:b,class:"q-gutter-md"},{default:s(()=>[i(n(q),null,{default:s(()=>[i(n(R),{outlined:"",modelValue:c.username,"onUpdate:modelValue":a[2]||(a[2]=o=>c.username=o),label:"\u624B\u673A\u53F7/\u90AE\u7BB1","lazy-rules":"",rules:[o=>o&&o.length>0||"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u6216\u90AE\u7BB1"]},null,8,["modelValue","rules"]),i(n(R),{outlined:"",modelValue:c.password,"onUpdate:modelValue":a[3]||(a[3]=o=>c.password=o),type:"password",label:"\u5BC6\u7801","lazy-rules":"",rules:[o=>o&&o.length>0||"\u8BF7\u8F93\u5165\u5BC6\u7801"]},null,8,["modelValue","rules"])]),_:1}),i(n(q),{class:"text-right"},{default:s(()=>[i(n(B),{flat:"",label:"Sign up",color:"primary",onClick:b}),i(n(B),{type:"submit",label:"Login",color:"primary"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Pe as default};
