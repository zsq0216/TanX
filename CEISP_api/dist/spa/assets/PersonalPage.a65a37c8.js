import{Q as d}from"./QCardSection.161fe826.js";import{b as I,a as N,Q as M}from"./axios.1562a4a6.js";import{Q as T,a as U}from"./QLayout.01a6ef7f.js";import{k as h,o as s,c as o,w as e,a,ae as c,Q as z,aF as v,av as y,d as f,$,aw as m,_ as F,Y as u,aG as B,aH as q,aI as j,aJ as G,W as H,t as J}from"./index.72b74f6b.js";import{Q as V,a as w}from"./QItem.f6b9adf1.js";import{Q as W}from"./QItemLabel.b5cd3164.js";import{Q as A}from"./QSeparator.f827b709.js";import{Q as D}from"./QInput.e2d496c4.js";import{_ as Y}from"./ChartComponent.a513bfce.js";import{Q as P}from"./QList.56715677.js";import{_ as K}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-dark.d9f79254.js";import"./uid.42677368.js";import"./scroll.7d6d8e83.js";const O=f("img",{src:"https://cdn.quasar.dev/img/boy-avatar.png"},null,-1),R={key:0},X={key:0},Z={class:"row justify-end q-mt-md"},ee={__name:"UserProfile",props:{enterpriseName:String,enterpriseIntro:String,enterpriseLegalperson:String,username:String,email:String},emits:["update:enterpriseIntro"],setup(r,{emit:t}){const _=r,n=h({}),l=h(!1),k=localStorage.getItem("userToken"),x=()=>{l.value=!0,n.value={intro:_.enterpriseIntro,per:_.enterpriseLegalperson}},E=t;function S(){E("update:enterpriseIntro",n.value.intro,n.value.per)}const i=async()=>{const C="http://47.122.24.142:7766/api/changeinfo",g={Authorization:`Bearer ${k}`},p=new FormData;p.append("Enterprise_Intro",n.value.intro),p.append("Enterprise_Legalperson'",n.value.per);try{const L=await N.post(C,p,{headers:g});console.log("Success:",L.data),l.value=!1,S(),F.create({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u4FE1\u606F\u4FEE\u6539\u6210\u529F"})}catch(L){console.error("Error:",L)}},Q=()=>{l.value=!1};return(C,g)=>(s(),o(I,{class:"fit"},{default:e(()=>[a(d,null,{default:e(()=>[c(" \u8D26\u6237\u4FE1\u606F ")]),_:1}),a(V,null,{default:e(()=>[a(w,{avatar:""},{default:e(()=>[a(z,null,{default:e(()=>[O]),_:1})]),_:1}),a(w,null,{default:e(()=>[a(W,null,{default:e(()=>[c(v(r.enterpriseName),1)]),_:1})]),_:1})]),_:1}),a(A),a(d,{class:"column"},{default:e(()=>[a(d,null,{default:e(()=>[c(" Email: "+v(r.email),1)]),_:1}),a(d,null,{default:e(()=>[c(" Tel: "+v(r.username),1)]),_:1}),a(d,null,{default:e(()=>[c(" \u4F01\u4E1A\u4FE1\u606F: "),l.value?(s(),o(D,{key:1,modelValue:n.value.intro,"onUpdate:modelValue":g[0]||(g[0]=p=>n.value.intro=p),dense:""},null,8,["modelValue"])):(s(),y("span",R,v(r.enterpriseIntro),1))]),_:1}),a(d,null,{default:e(()=>[c(" \u6CD5\u4EBA: "),l.value?(s(),o(D,{key:1,modelValue:n.value.per,"onUpdate:modelValue":g[1]||(g[1]=p=>n.value.per=p),dense:""},null,8,["modelValue"])):(s(),y("span",X,v(r.enterpriseLegalperson),1))]),_:1}),f("div",Z,[l.value?m("",!0):(s(),o($,{key:0,label:"\u7F16\u8F91",color:"primary",onClick:x})),l.value?(s(),o($,{key:1,label:"\u4FDD\u5B58",color:"primary",onClick:i})):m("",!0),l.value?(s(),o($,{key:2,label:"\u53D6\u6D88",color:"primary",onClick:Q})):m("",!0)])]),_:1})]),_:1}))}};const b=r=>(j("data-v-5bee1ea5"),r=r(),G(),r),ae=b(()=>f("div",{class:"text-h6"},"\u5F85\u529E\u4E8B\u9879",-1)),te={key:0},se=b(()=>f("div",{class:"text-subtitle2"},"\u6392\u653E\u6570\u636E\u63D0\u9192:",-1)),ne={key:1},re=b(()=>f("div",{class:"text-subtitle2"},"\u4F01\u4E1A\u4FE1\u606F\u63D0\u9192:",-1)),oe=b(()=>f("div",{class:"text-subtitle1"},"\u6CA1\u6709\u65B0\u7684\u6D88\u606F\u3002",-1)),le={__name:"MessageAlert",props:{emissions:Array,info:Array},setup(r){return(t,_)=>(s(),o(u(I),{class:"my-card"},{default:e(()=>[a(u(d),null,{default:e(()=>[ae]),_:1}),a(u(A)),r.emissions||r.info?(s(),o(u(d),{key:0},{default:e(()=>[r.emissions?(s(),y("div",te,[se,a(u(P),null,{default:e(()=>[(s(!0),y(B,null,q(r.emissions,(n,l)=>(s(),o(u(V),{key:"emissions-"+l},{default:e(()=>[a(u(w),null,{default:e(()=>[c(v(n),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):m("",!0),a(u(A)),r.info?(s(),y("div",ne,[re,a(u(P),null,{default:e(()=>[(s(!0),y(B,null,q(r.info,(n,l)=>(s(),o(u(V),{key:"info-"+l},{default:e(()=>[a(u(w),null,{default:e(()=>[c(v(n),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):m("",!0)]),_:1})):(s(),o(u(d),{key:1},{default:e(()=>[oe]),_:1}))]),_:1}))}};var ie=K(le,[["__scopeId","data-v-5bee1ea5"]]);const ue={class:"col-7 q-mb-md q-gutter-md"},de={class:"col-4 q-ml-md"},xe={__name:"PersonalPage",setup(r){const t=h({}),_=h({}),n=h(!0),l=h(!1);H();const k=localStorage.getItem("userToken");function x(i,Q){t.value.Enterprise_Intro=i,t.value.Enterprise_Legalperson=Q}function E(){console.log("in peasonal page"),console.log(k),N.get("http://47.122.24.142:7766/api/getemissioninfo",{headers:{Authorization:`Bearer ${k}`}}).then(i=>{i.status===200?(console.log(i.data),t.value=i.data,console.log(t.value.Enterprise_Name)):i.status===202&&(l.value=!0),n.value=!1}).catch(i=>{console.error("Error fetching data:",i),n.value=!1})}function S(){n.value=!0,N.get("http://47.122.24.142:7766/api/getmassage",{headers:{Authorization:`Bearer ${k}`}}).then(i=>{_.value=i.data,n.value=!1}).catch(i=>{console.error("Error fetching message:",i),n.value=!1})}return J(()=>{E(),S()}),(i,Q)=>(s(),o(T,null,{default:e(()=>[a(U,null,{default:e(()=>[a(M,{class:"q-pa-md row items-start justify-center"},{default:e(()=>[f("div",ue,[a(I,null,{default:e(()=>[a(d,null,{default:e(()=>[c(" \u603B\u89C8 ")]),_:1}),l.value?(s(),o(d,{key:0},{default:e(()=>[c(" \u8BF7\u5148\u5F55\u5165\u4FE1\u606F ")]),_:1})):m("",!0),t.value.show_data?(s(),o(d,{key:1},{default:e(()=>[a(Y,{fixburn:t.value.show_data.fixburn,movingburn:t.value.show_data.movingburn,emission1:t.value.show_data.emission1,electricity:t.value.show_data.electricity,heating:t.value.show_data.heating,emission2:t.value.show_data.emission2,commuting:t.value.show_data.commuting,travel:t.value.show_data.travel,emission3:t.value.show_data.emission3},null,8,["fixburn","movingburn","emission1","electricity","heating","emission2","commuting","travel","emission3"])]),_:1})):m("",!0)]),_:1})]),f("div",de,[a(I,{class:"fit"},{default:e(()=>[t.value?(s(),o(ee,{key:0,enterpriseName:t.value.Enterprise_Name,enterpriseIntro:t.value.Enterprise_Intro,enterpriseLegalperson:t.value.Enterprise_Legalperson,username:t.value.username,email:t.value.email,"onUpdate:enterpriseIntro":x},null,8,["enterpriseName","enterpriseIntro","enterpriseLegalperson","username","email"])):m("",!0)]),_:1}),a(I,{class:"q-my-md"},{default:e(()=>[_.value?(s(),o(ie,{key:0,emissions:_.value.emissions,info:_.value.info},null,8,["emissions","info"])):m("",!0)]),_:1})])]),_:1})]),_:1})]),_:1}))}};export{xe as default};
