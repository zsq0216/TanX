import{Q as Ot}from"./QCardSection.161fe826.js";import{u as Ft,a as Dt,d as Ge,Q as fe,e as Lt}from"./QSelect.27372468.js";import{k as D,f as s,h as r,aq as Ye,B as Ve,g as te,ap as Xe,q as G,x as Ae,aK as K,e as I,A as N,n as Mt,l as j,aD as Je,t as Ze,H as jt,G as Qt,m as et,L as Ee,ay as At,aC as Ne,aL as xe,aM as Ie,ac as Et,K as tt,au as Nt,a2 as J,$ as ee,X as It,W as lt,o as at,c as nt,w as F,a as V,d as ge,aN as Ht,ae as ot,aF as Ut,N as zt,Y as W}from"./index.72b74f6b.js";import{a as Re,u as Te}from"./use-dark.d9f79254.js";import{e as Kt,m as Wt,u as Gt,Q as Yt,b as Xt,a as Jt}from"./axios.1562a4a6.js";import{Q as Zt}from"./prevent-scroll.e5f540d1.js";import{Q as el}from"./QInput.e2d496c4.js";import{Q as tl}from"./QSeparator.f827b709.js";import{Q as ll}from"./QList.56715677.js";import{Q as al}from"./QMarkupTable.d4ac7ee3.js";import{g as nl}from"./scroll.7d6d8e83.js";import"./QItem.f6b9adf1.js";import"./QItemLabel.b5cd3164.js";import"./rtl.49e07ec0.js";import"./use-timeout.c4e98ea7.js";import"./uid.42677368.js";function ol(e,a){const t=D(null),c=s(()=>e.disable===!0?null:r("span",{ref:t,class:"no-outline",tabindex:-1}));function i(u){const n=a.value;u!==void 0&&u.type.indexOf("key")===0?n!==null&&document.activeElement!==n&&n.contains(document.activeElement)===!0&&n.focus():t.value!==null&&(u===void 0||n!==null&&n.contains(u.target)===!0)&&t.value.focus()}return{refocusTargetEl:c,refocusTarget:i}}var rl={xs:30,sm:35,md:40,lg:50,xl:60};const rt={...Te,...Xe,...Kt,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},it=["update:modelValue"];function st(e,a){const{props:t,slots:c,emit:i,proxy:u}=G(),{$q:n}=u,g=Re(t,n),m=D(null),{refocusTargetEl:y,refocusTarget:o}=ol(t,m),d=Ye(t,rl),v=s(()=>t.val!==void 0&&Array.isArray(t.modelValue)),b=s(()=>{const q=K(t.val);return v.value===!0?t.modelValue.findIndex(M=>K(M)===q):-1}),k=s(()=>v.value===!0?b.value!==-1:K(t.modelValue)===K(t.trueValue)),w=s(()=>v.value===!0?b.value===-1:K(t.modelValue)===K(t.falseValue)),_=s(()=>k.value===!1&&w.value===!1),T=s(()=>t.disable===!0?-1:t.tabindex||0),B=s(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(t.disable===!0?" disabled":"")+(g.value===!0?` q-${e}--dark`:"")+(t.dense===!0?` q-${e}--dense`:"")+(t.leftLabel===!0?" reverse":"")),O=s(()=>{const q=k.value===!0?"truthy":w.value===!0?"falsy":"indet",M=t.color!==void 0&&(t.keepColor===!0||(e==="toggle"?k.value===!0:w.value!==!0))?` text-${t.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${q}${M}`}),P=s(()=>{const q={type:"checkbox"};return t.name!==void 0&&Object.assign(q,{".checked":k.value,"^checked":k.value===!0?"checked":void 0,name:t.name,value:v.value===!0?t.val:t.trueValue}),q}),R=Wt(P),H=s(()=>{const q={tabindex:T.value,role:e==="toggle"?"switch":"checkbox","aria-label":t.label,"aria-checked":_.value===!0?"mixed":k.value===!0?"true":"false"};return t.disable===!0&&(q["aria-disabled"]="true"),q});function Y(q){q!==void 0&&(Ae(q),o(q)),t.disable!==!0&&i("update:modelValue",X(),q)}function X(){if(v.value===!0){if(k.value===!0){const q=t.modelValue.slice();return q.splice(b.value,1),q}return t.modelValue.concat([t.val])}if(k.value===!0){if(t.toggleOrder!=="ft"||t.toggleIndeterminate===!1)return t.falseValue}else if(w.value===!0){if(t.toggleOrder==="ft"||t.toggleIndeterminate===!1)return t.trueValue}else return t.toggleOrder!=="ft"?t.trueValue:t.falseValue;return t.indeterminateValue}function le(q){(q.keyCode===13||q.keyCode===32)&&Ae(q)}function L(q){(q.keyCode===13||q.keyCode===32)&&Y(q)}const E=a(k,_);return Object.assign(u,{toggle:Y}),()=>{const q=E();t.disable!==!0&&R(q,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const M=[r("div",{class:O.value,style:d.value,"aria-hidden":"true"},q)];y.value!==null&&M.push(y.value);const ae=t.label!==void 0?Ve(c.default,[t.label]):te(c.default);return ae!==void 0&&M.push(r("div",{class:`q-${e}__label q-anchor--skip`},ae)),r("div",{ref:m,class:B.value,...H.value,onClick:Y,onKeydown:le,onKeyup:L},M)}}var He=I({name:"QToggle",props:{...rt,icon:String,iconColor:String},emits:it,setup(e){function a(t,c){const i=s(()=>(t.value===!0?e.checkedIcon:c.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),u=s(()=>t.value===!0?e.iconColor:null);return()=>[r("div",{class:"q-toggle__track"}),r("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},i.value!==void 0?[r(N,{name:i.value,color:u.value})]:void 0)]}return st("toggle",a)}}),Ue=I({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:a}){const t=G(),c=s(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return r("td",{class:c.value},te(a.default));const i=t.vnode.key,u=(e.props.colsMap!==void 0?e.props.colsMap[i]:null)||e.props.col;if(u===void 0)return;const{row:n}=e.props;return r("td",{class:c.value+u.__tdClass(n),style:u.__tdStyle(n)},te(a.default))}}}),il=I({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:a,emit:t}){const c=G(),{proxy:{$q:i}}=c,u=n=>{t("click",n)};return()=>{if(e.props===void 0)return r("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:u},te(a.default));let n,g;const m=c.vnode.key;if(m){if(n=e.props.colsMap[m],n===void 0)return}else n=e.props.col;if(n.sortable===!0){const o=n.align==="right"?"unshift":"push";g=Mt(a.default,[]),g[o](r(N,{class:n.__iconClass,name:i.iconSet.table.arrowUp}))}else g=te(a.default);const y={class:n.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:n.headerStyle,onClick:o=>{n.sortable===!0&&e.props.sort(n),u(o)}};return r("th",y,g)}}});function ut(e,a){return r("div",e,[r("table",{class:"q-table"},a)])}const sl={list:ll,table:al},ul=["list","table","__qtable"];var cl=I({name:"QVirtualScroll",props:{...Ft,type:{type:String,default:"list",validator:e=>ul.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:a,attrs:t}){let c;const i=D(null),u=s(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:n,localResetVirtualScroll:g,padVirtualScroll:m,onVirtualScrollEvt:y}=Dt({virtualScrollLength:u,getVirtualScrollTarget:k,getVirtualScrollEl:b}),o=s(()=>{if(u.value===0)return[];const B=(O,P)=>({index:n.value.from+P,item:O});return e.itemsFn===void 0?e.items.slice(n.value.from,n.value.to).map(B):e.itemsFn(n.value.from,n.value.to-n.value.from).map(B)}),d=s(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),v=s(()=>e.scrollTarget!==void 0?{}:{tabindex:0});j(u,()=>{g()}),j(()=>e.scrollTarget,()=>{_(),w()});function b(){return i.value.$el||i.value}function k(){return c}function w(){c=nl(b(),e.scrollTarget),c.addEventListener("scroll",y,Ee.passive)}function _(){c!==void 0&&(c.removeEventListener("scroll",y,Ee.passive),c=void 0)}function T(){let B=m(e.type==="list"?"div":"tbody",o.value.map(a.default));return a.before!==void 0&&(B=a.before().concat(B)),Ve(a.after,B)}return Je(()=>{g()}),Ze(()=>{w()}),jt(()=>{w()}),Qt(()=>{_()}),et(()=>{_()}),()=>{if(a.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?ut({ref:i,class:"q-table__middle "+d.value},T()):r(sl[e.type],{...t,ref:i,class:[t.class,d.value],...v.value},T)}}});const dl={xs:2,sm:4,md:6,lg:10,xl:14};function ze(e,a,t){return{transform:a===!0?`translateX(${t.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var vl=I({name:"QLinearProgress",props:{...Te,...Xe,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:a}){const{proxy:t}=G(),c=Re(e,t.$q),i=Ye(e,dl),u=s(()=>e.indeterminate===!0||e.query===!0),n=s(()=>e.reverse!==e.query),g=s(()=>({...i.value!==null?i.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),m=s(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),y=s(()=>ze(e.buffer!==void 0?e.buffer:1,n.value,t.$q)),o=s(()=>`with${e.instantFeedback===!0?"out":""}-transition`),d=s(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${o.value} q-linear-progress__track--${c.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),v=s(()=>ze(u.value===!0?1:e.value,n.value,t.$q)),b=s(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${o.value} q-linear-progress__model--${u.value===!0?"in":""}determinate`),k=s(()=>({width:`${e.value*100}%`})),w=s(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${o.value}`);return()=>{const _=[r("div",{class:d.value,style:y.value}),r("div",{class:b.value,style:v.value})];return e.stripe===!0&&u.value===!1&&_.push(r("div",{class:w.value,style:k.value})),r("div",{class:m.value,style:g.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Ve(a.default,_))}}});const fl=r("div",{key:"svg",class:"q-checkbox__bg absolute"},[r("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[r("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),r("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var Pe=I({name:"QCheckbox",props:rt,emits:it,setup(e){function a(t,c){const i=s(()=>(t.value===!0?e.checkedIcon:c.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>i.value!==null?[r("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[r(N,{class:"q-checkbox__icon",name:i.value})])]:[fl]}return st("checkbox",a)}});let Z=0;const gl={fullscreen:Boolean,noRouteFullscreenExit:Boolean},ml=["update:fullscreen","fullscreen"];function bl(){const e=G(),{props:a,emit:t,proxy:c}=e;let i,u,n;const g=D(!1);At(e)===!0&&j(()=>c.$route.fullPath,()=>{a.noRouteFullscreenExit!==!0&&o()}),j(()=>a.fullscreen,d=>{g.value!==d&&m()}),j(g,d=>{t("update:fullscreen",d),t("fullscreen",d)});function m(){g.value===!0?o():y()}function y(){g.value!==!0&&(g.value=!0,n=c.$el.parentNode,n.replaceChild(u,c.$el),document.body.appendChild(c.$el),Z++,Z===1&&document.body.classList.add("q-body--fullscreen-mixin"),i={handler:o},Ne.add(i))}function o(){g.value===!0&&(i!==void 0&&(Ne.remove(i),i=void 0),n.replaceChild(c.$el,u),g.value=!1,Z=Math.max(0,Z-1),Z===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),c.$el.scrollIntoView!==void 0&&setTimeout(()=>{c.$el.scrollIntoView()})))}return Je(()=>{u=document.createElement("span")}),Ze(()=>{a.fullscreen===!0&&y()}),et(o),Object.assign(c,{toggleFullscreen:m,setFullscreen:y,exitFullscreen:o}),{inFullscreen:g,toggleFullscreen:m}}function yl(e,a){return new Date(e)-new Date(a)}const hl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Sl(e,a,t,c){const i=s(()=>{const{sortBy:g}=a.value;return g&&t.value.find(m=>m.name===g)||null}),u=s(()=>e.sortMethod!==void 0?e.sortMethod:(g,m,y)=>{const o=t.value.find(b=>b.name===m);if(o===void 0||o.field===void 0)return g;const d=y===!0?-1:1,v=typeof o.field=="function"?b=>o.field(b):b=>b[o.field];return g.sort((b,k)=>{let w=v(b),_=v(k);return o.rawSort!==void 0?o.rawSort(w,_,b,k)*d:w==null?-1*d:_==null?1*d:o.sort!==void 0?o.sort(w,_,b,k)*d:xe(w)===!0&&xe(_)===!0?(w-_)*d:Ie(w)===!0&&Ie(_)===!0?yl(w,_)*d:typeof w=="boolean"&&typeof _=="boolean"?(w-_)*d:([w,_]=[w,_].map(T=>(T+"").toLocaleString().toLowerCase()),w<_?-1*d:w===_?0:d)})});function n(g){let m=e.columnSortOrder;if(Et(g)===!0)g.sortOrder&&(m=g.sortOrder),g=g.name;else{const d=t.value.find(v=>v.name===g);d!==void 0&&d.sortOrder&&(m=d.sortOrder)}let{sortBy:y,descending:o}=a.value;y!==g?(y=g,o=m==="da"):e.binaryStateSort===!0?o=!o:o===!0?m==="ad"?y=null:o=!1:m==="ad"?o=!0:y=null,c({sortBy:y,descending:o,page:1})}return{columnToSort:i,computedSortMethod:u,sort:n}}const _l={filter:[String,Object],filterMethod:Function};function wl(e,a){const t=s(()=>e.filterMethod!==void 0?e.filterMethod:(c,i,u,n)=>{const g=i?i.toLowerCase():"";return c.filter(m=>u.some(y=>{const o=n(y,m)+"";return(o==="undefined"||o==="null"?"":o.toLowerCase()).indexOf(g)!==-1}))});return j(()=>e.filter,()=>{tt(()=>{a({page:1},!0)})},{deep:!0}),{computedFilterMethod:t}}function pl(e,a){for(const t in a)if(a[t]!==e[t])return!1;return!0}function Ke(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const kl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function ql(e,a){const{props:t,emit:c}=e,i=D(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:t.rowsPerPageOptions.length!==0?t.rowsPerPageOptions[0]:5},t.pagination)),u=s(()=>{const o=t["onUpdate:pagination"]!==void 0?{...i.value,...t.pagination}:i.value;return Ke(o)}),n=s(()=>u.value.rowsNumber!==void 0);function g(o){m({pagination:o,filter:t.filter})}function m(o={}){tt(()=>{c("request",{pagination:o.pagination||u.value,filter:o.filter||t.filter,getCellValue:a})})}function y(o,d){const v=Ke({...u.value,...o});if(pl(u.value,v)===!0){n.value===!0&&d===!0&&g(v);return}if(n.value===!0){g(v);return}t.pagination!==void 0&&t["onUpdate:pagination"]!==void 0?c("update:pagination",v):i.value=v}return{innerPagination:i,computedPagination:u,isServerSide:n,requestServerInteraction:m,setPagination:y}}function Cl(e,a,t,c,i,u){const{props:n,emit:g,proxy:{$q:m}}=e,y=s(()=>c.value===!0?t.value.rowsNumber||0:u.value),o=s(()=>{const{page:P,rowsPerPage:R}=t.value;return(P-1)*R}),d=s(()=>{const{page:P,rowsPerPage:R}=t.value;return P*R}),v=s(()=>t.value.page===1),b=s(()=>t.value.rowsPerPage===0?1:Math.max(1,Math.ceil(y.value/t.value.rowsPerPage))),k=s(()=>d.value===0?!0:t.value.page>=b.value),w=s(()=>(n.rowsPerPageOptions.includes(a.value.rowsPerPage)?n.rowsPerPageOptions:[a.value.rowsPerPage].concat(n.rowsPerPageOptions)).map(R=>({label:R===0?m.lang.table.allRows:""+R,value:R})));j(b,(P,R)=>{if(P===R)return;const H=t.value.page;P&&!H?i({page:1}):P<H&&i({page:P})});function _(){i({page:1})}function T(){const{page:P}=t.value;P>1&&i({page:P-1})}function B(){const{page:P,rowsPerPage:R}=t.value;d.value>0&&P*R<y.value&&i({page:P+1})}function O(){i({page:b.value})}return n["onUpdate:pagination"]!==void 0&&g("update:pagination",{...t.value}),{firstRowIndex:o,lastRowIndex:d,isFirstPage:v,isLastPage:k,pagesNumber:b,computedRowsPerPageOptions:w,computedRowsNumber:y,firstPage:_,prevPage:T,nextPage:B,lastPage:O}}const Pl={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},xl=["update:selected","selection"];function Vl(e,a,t,c){const i=s(()=>{const k={};return e.selected.map(c.value).forEach(w=>{k[w]=!0}),k}),u=s(()=>e.selection!=="none"),n=s(()=>e.selection==="single"),g=s(()=>e.selection==="multiple"),m=s(()=>t.value.length!==0&&t.value.every(k=>i.value[c.value(k)]===!0)),y=s(()=>m.value!==!0&&t.value.some(k=>i.value[c.value(k)]===!0)),o=s(()=>e.selected.length);function d(k){return i.value[k]===!0}function v(){a("update:selected",[])}function b(k,w,_,T){a("selection",{rows:w,added:_,keys:k,evt:T});const B=n.value===!0?_===!0?w:[]:_===!0?e.selected.concat(w):e.selected.filter(O=>k.includes(c.value(O))===!1);a("update:selected",B)}return{hasSelectionMode:u,singleSelection:n,multipleSelection:g,allRowsSelected:m,someRowsSelected:y,rowsSelectedNumber:o,isRowSelected:d,clearSelection:v,updateSelection:b}}function We(e){return Array.isArray(e)?e.slice():[]}const Rl={expanded:Array},Tl=["update:expanded"];function Bl(e,a){const t=D(We(e.expanded));j(()=>e.expanded,n=>{t.value=We(n)});function c(n){return t.value.includes(n)}function i(n){e.expanded!==void 0?a("update:expanded",n):t.value=n}function u(n,g){const m=t.value.slice(),y=m.indexOf(n);g===!0?y===-1&&(m.push(n),i(m)):y!==-1&&(m.splice(y,1),i(m))}return{isRowExpanded:c,setExpanded:i,updateExpanded:u}}const $l={visibleColumns:Array};function Ol(e,a,t){const c=s(()=>{if(e.columns!==void 0)return e.columns;const g=e.rows[0];return g!==void 0?Object.keys(g).map(m=>({name:m,label:m.toUpperCase(),field:m,align:xe(g[m])?"right":"left",sortable:!0})):[]}),i=s(()=>{const{sortBy:g,descending:m}=a.value;return(e.visibleColumns!==void 0?c.value.filter(o=>o.required===!0||e.visibleColumns.includes(o.name)===!0):c.value).map(o=>{const d=o.align||"right",v=`text-${d}`;return{...o,align:d,__iconClass:`q-table__sort-icon q-table__sort-icon--${d}`,__thClass:v+(o.headerClasses!==void 0?" "+o.headerClasses:"")+(o.sortable===!0?" sortable":"")+(o.name===g?` sorted ${m===!0?"sort-desc":""}`:""),__tdStyle:o.style!==void 0?typeof o.style!="function"?()=>o.style:o.style:()=>null,__tdClass:o.classes!==void 0?typeof o.classes!="function"?()=>v+" "+o.classes:b=>v+" "+o.classes(b):()=>v}})}),u=s(()=>{const g={};return i.value.forEach(m=>{g[m.name]=m}),g}),n=s(()=>e.tableColspan!==void 0?e.tableColspan:i.value.length+(t.value===!0?1:0));return{colList:c,computedCols:i,computedColsMap:u,computedColspan:n}}const ve="q-table__bottom row items-center",ct={};Ge.forEach(e=>{ct[e]={}});var Fl=I({name:"QTable",props:{rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...ct,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Te,...gl,...$l,..._l,...kl,...Rl,...Pl,...hl},emits:["request","virtualScroll",...ml,...Tl,...xl],setup(e,{slots:a,emit:t}){const c=G(),{proxy:{$q:i}}=c,u=Re(e,i),{inFullscreen:n,toggleFullscreen:g}=bl(),m=s(()=>typeof e.rowKey=="function"?e.rowKey:l=>l[e.rowKey]),y=D(null),o=D(null),d=s(()=>e.grid!==!0&&e.virtualScroll===!0),v=s(()=>" q-table__card"+(u.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),b=s(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":v.value)+(u.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(n.value===!0?" fullscreen scroll":"")),k=s(()=>b.value+(e.loading===!0?" q-table--loading":""));j(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+b.value,()=>{d.value===!0&&o.value!==null&&o.value.reset()});const{innerPagination:w,computedPagination:_,isServerSide:T,requestServerInteraction:B,setPagination:O}=ql(c,U),{computedFilterMethod:P}=wl(e,O),{isRowExpanded:R,setExpanded:H,updateExpanded:Y}=Bl(e,t),X=s(()=>{let l=e.rows;if(T.value===!0||l.length===0)return l;const{sortBy:f,descending:h}=_.value;return e.filter&&(l=P.value(l,e.filter,Q.value,U)),ft.value!==null&&(l=gt.value(e.rows===l?l.slice():l,f,h)),l}),le=s(()=>X.value.length),L=s(()=>{let l=X.value;if(T.value===!0)return l;const{rowsPerPage:f}=_.value;return f!==0&&(oe.value===0&&e.rows!==l?l.length>re.value&&(l=l.slice(0,re.value)):l=l.slice(oe.value,re.value)),l}),{hasSelectionMode:E,singleSelection:q,multipleSelection:M,allRowsSelected:ae,someRowsSelected:Be,rowsSelectedNumber:me,isRowSelected:be,clearSelection:dt,updateSelection:ne}=Vl(e,t,L,m),{colList:vt,computedCols:Q,computedColsMap:$e,computedColspan:Oe}=Ol(e,_,E),{columnToSort:ft,computedSortMethod:gt,sort:ye}=Sl(e,_,vt,O),{firstRowIndex:oe,lastRowIndex:re,isFirstPage:he,isLastPage:Se,pagesNumber:ie,computedRowsPerPageOptions:mt,computedRowsNumber:se,firstPage:_e,prevPage:we,nextPage:pe,lastPage:ke}=Cl(c,w,_,T,O,le),bt=s(()=>L.value.length===0),yt=s(()=>{const l={};return Ge.forEach(f=>{l[f]=e[f]}),l.virtualScrollItemSize===void 0&&(l.virtualScrollItemSize=e.dense===!0?28:48),l});function ht(){d.value===!0&&o.value.reset()}function St(){if(e.grid===!0)return Bt();const l=e.hideHeader!==!0?je:null;if(d.value===!0){const h=a["top-row"],S=a["bottom-row"],p={default:x=>De(x.item,a.body,x.index)};if(h!==void 0){const x=r("tbody",h({cols:Q.value}));p.before=l===null?()=>x:()=>[l()].concat(x)}else l!==null&&(p.before=l);return S!==void 0&&(p.after=()=>r("tbody",S({cols:Q.value}))),r(cl,{ref:o,class:e.tableClass,style:e.tableStyle,...yt.value,scrollTarget:e.virtualScrollTarget,items:L.value,type:"__qtable",tableColspan:Oe.value,onVirtualScroll:wt},p)}const f=[pt()];return l!==null&&f.unshift(l()),ut({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},f)}function _t(l,f){if(o.value!==null){o.value.scrollTo(l,f);return}l=parseInt(l,10);const h=y.value.querySelector(`tbody tr:nth-of-type(${l+1})`);if(h!==null){const S=y.value.querySelector(".q-table__middle.scroll"),p=h.offsetTop-e.virtualScrollStickySizeStart,x=p<S.scrollTop?"decrease":"increase";S.scrollTop=p,t("virtualScroll",{index:l,from:0,to:w.value.rowsPerPage-1,direction:x})}}function wt(l){t("virtualScroll",l)}function Fe(){return[r(vl,{class:"q-table__linear-progress",color:e.color,dark:u.value,indeterminate:!0,trackColor:"transparent"})]}function De(l,f,h){const S=m.value(l),p=be(S);if(f!==void 0)return f(Le({key:S,row:l,pageIndex:h,__trClass:p?"selected":""}));const x=a["body-cell"],C=Q.value.map($=>{const ce=a[`body-cell-${$.name}`],de=ce!==void 0?ce:x;return de!==void 0?de(kt({key:S,row:l,pageIndex:h,col:$})):r("td",{class:$.__tdClass(l),style:$.__tdStyle(l)},U($,l))});if(E.value===!0){const $=a["body-selection"],ce=$!==void 0?$(qt({key:S,row:l,pageIndex:h})):[r(Pe,{modelValue:p,color:e.color,dark:u.value,dense:e.dense,"onUpdate:modelValue":(de,$t)=>{ne([S],[l],de,$t)}})];C.unshift(r("td",{class:"q-table--col-auto-width"},ce))}const A={key:S,class:{selected:p}};return e.onRowClick!==void 0&&(A.class["cursor-pointer"]=!0,A.onClick=$=>{t("RowClick",$,l,h)}),e.onRowDblclick!==void 0&&(A.class["cursor-pointer"]=!0,A.onDblclick=$=>{t("RowDblclick",$,l,h)}),e.onRowContextmenu!==void 0&&(A.class["cursor-pointer"]=!0,A.onContextmenu=$=>{t("RowContextmenu",$,l,h)}),r("tr",A,C)}function pt(){const l=a.body,f=a["top-row"],h=a["bottom-row"];let S=L.value.map((p,x)=>De(p,l,x));return f!==void 0&&(S=f({cols:Q.value}).concat(S)),h!==void 0&&(S=S.concat(h({cols:Q.value}))),r("tbody",S)}function Le(l){return qe(l),l.cols=l.cols.map(f=>J({...f},"value",()=>U(f,l.row))),l}function kt(l){return qe(l),J(l,"value",()=>U(l.col,l.row)),l}function qt(l){return qe(l),l}function qe(l){Object.assign(l,{cols:Q.value,colsMap:$e.value,sort:ye,rowIndex:oe.value+l.pageIndex,color:e.color,dark:u.value,dense:e.dense}),E.value===!0&&J(l,"selected",()=>be(l.key),(f,h)=>{ne([l.key],[l.row],f,h)}),J(l,"expand",()=>R(l.key),f=>{Y(l.key,f)})}function U(l,f){const h=typeof l.field=="function"?l.field(f):f[l.field];return l.format!==void 0?l.format(h,f):h}const z=s(()=>({pagination:_.value,pagesNumber:ie.value,isFirstPage:he.value,isLastPage:Se.value,firstPage:_e,prevPage:we,nextPage:pe,lastPage:ke,inFullscreen:n.value,toggleFullscreen:g}));function Ct(){const l=a.top,f=a["top-left"],h=a["top-right"],S=a["top-selection"],p=E.value===!0&&S!==void 0&&me.value>0,x="q-table__top relative-position row items-center";if(l!==void 0)return r("div",{class:x},[l(z.value)]);let C;if(p===!0?C=S(z.value).slice():(C=[],f!==void 0?C.push(r("div",{class:"q-table__control"},[f(z.value)])):e.title&&C.push(r("div",{class:"q-table__control"},[r("div",{class:["q-table__title",e.titleClass]},e.title)]))),h!==void 0&&(C.push(r("div",{class:"q-table__separator col"})),C.push(r("div",{class:"q-table__control"},[h(z.value)]))),C.length!==0)return r("div",{class:x},C)}const Me=s(()=>Be.value===!0?null:ae.value);function je(){const l=Pt();return e.loading===!0&&a.loading===void 0&&l.push(r("tr",{class:"q-table__progress"},[r("th",{class:"relative-position",colspan:Oe.value},Fe())])),r("thead",l)}function Pt(){const l=a.header,f=a["header-cell"];if(l!==void 0)return l(Ce({header:!0})).slice();const h=Q.value.map(S=>{const p=a[`header-cell-${S.name}`],x=p!==void 0?p:f,C=Ce({col:S});return x!==void 0?x(C):r(il,{key:S.name,props:C},()=>S.label)});if(q.value===!0&&e.grid!==!0)h.unshift(r("th",{class:"q-table--col-auto-width"}," "));else if(M.value===!0){const S=a["header-selection"],p=S!==void 0?S(Ce({})):[r(Pe,{color:e.color,modelValue:Me.value,dark:u.value,dense:e.dense,"onUpdate:modelValue":Qe})];h.unshift(r("th",{class:"q-table--col-auto-width"},p))}return[r("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},h)]}function Ce(l){return Object.assign(l,{cols:Q.value,sort:ye,colsMap:$e.value,color:e.color,dark:u.value,dense:e.dense}),M.value===!0&&J(l,"selected",()=>Me.value,Qe),l}function Qe(l){Be.value===!0&&(l=!1),ne(L.value.map(m.value),L.value,l)}const ue=s(()=>{const l=[e.iconFirstPage||i.iconSet.table.firstPage,e.iconPrevPage||i.iconSet.table.prevPage,e.iconNextPage||i.iconSet.table.nextPage,e.iconLastPage||i.iconSet.table.lastPage];return i.lang.rtl===!0?l.reverse():l});function xt(){if(e.hideBottom===!0)return;if(bt.value===!0){if(e.hideNoData===!0)return;const h=e.loading===!0?e.loadingLabel||i.lang.table.loading:e.filter?e.noResultsLabel||i.lang.table.noResults:e.noDataLabel||i.lang.table.noData,S=a["no-data"],p=S!==void 0?[S({message:h,icon:i.iconSet.table.warning,filter:e.filter})]:[r(N,{class:"q-table__bottom-nodata-icon",name:i.iconSet.table.warning}),h];return r("div",{class:ve+" q-table__bottom--nodata"},p)}const l=a.bottom;if(l!==void 0)return r("div",{class:ve},[l(z.value)]);const f=e.hideSelectedBanner!==!0&&E.value===!0&&me.value>0?[r("div",{class:"q-table__control"},[r("div",[(e.selectedRowsLabel||i.lang.table.selectedRecords)(me.value)])])]:[];if(e.hidePagination!==!0)return r("div",{class:ve+" justify-end"},Rt(f));if(f.length!==0)return r("div",{class:ve},f)}function Vt(l){O({page:1,rowsPerPage:l.value})}function Rt(l){let f;const{rowsPerPage:h}=_.value,S=e.paginationLabel||i.lang.table.pagination,p=a.pagination,x=e.rowsPerPageOptions.length>1;if(l.push(r("div",{class:"q-table__separator col"})),x===!0&&l.push(r("div",{class:"q-table__control"},[r("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||i.lang.table.recordsPerPage]),r(fe,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:h,options:mt.value,displayValue:h===0?i.lang.table.allRows:h,dark:u.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Vt})])),p!==void 0)f=p(z.value);else if(f=[r("span",h!==0?{class:"q-table__bottom-item"}:{},[h?S(oe.value+1,Math.min(re.value,se.value),se.value):S(1,le.value,se.value)])],h!==0&&ie.value>1){const C={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(C.size="sm"),ie.value>2&&f.push(r(ee,{key:"pgFirst",...C,icon:ue.value[0],disable:he.value,onClick:_e})),f.push(r(ee,{key:"pgPrev",...C,icon:ue.value[1],disable:he.value,onClick:we}),r(ee,{key:"pgNext",...C,icon:ue.value[2],disable:Se.value,onClick:pe})),ie.value>2&&f.push(r(ee,{key:"pgLast",...C,icon:ue.value[3],disable:Se.value,onClick:ke}))}return l.push(r("div",{class:"q-table__control"},f)),l}function Tt(){const l=e.gridHeader===!0?[r("table",{class:"q-table"},[je()])]:e.loading===!0&&a.loading===void 0?Fe():void 0;return r("div",{class:"q-table__middle"},l)}function Bt(){const l=a.item!==void 0?a.item:f=>{const h=f.cols.map(p=>r("div",{class:"q-table__grid-item-row"},[r("div",{class:"q-table__grid-item-title"},[p.label]),r("div",{class:"q-table__grid-item-value"},[p.value])]));if(E.value===!0){const p=a["body-selection"],x=p!==void 0?p(f):[r(Pe,{modelValue:f.selected,color:e.color,dark:u.value,dense:e.dense,"onUpdate:modelValue":(C,A)=>{ne([f.key],[f.row],C,A)}})];h.unshift(r("div",{class:"q-table__grid-item-row"},x),r(tl,{dark:u.value}))}const S={class:["q-table__grid-item-card"+v.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(S.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(S.onClick=p=>{t("RowClick",p,f.row,f.pageIndex)}),e.onRowDblclick!==void 0&&(S.onDblclick=p=>{t("RowDblclick",p,f.row,f.pageIndex)})),r("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(f.selected===!0?" q-table__grid-item--selected":"")},[r("div",S,h)])};return r("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},L.value.map((f,h)=>l(Le({key:m.value(f),row:f,pageIndex:h}))))}return Object.assign(c.proxy,{requestServerInteraction:B,setPagination:O,firstPage:_e,prevPage:we,nextPage:pe,lastPage:ke,isRowSelected:be,clearSelection:dt,isRowExpanded:R,setExpanded:H,sort:ye,resetVirtualScroll:ht,scrollTo:_t,getCellValue:U}),Nt(c.proxy,{filteredSortedRows:()=>X.value,computedRows:()=>L.value,computedRowsNumber:()=>se.value}),()=>{const l=[Ct()],f={ref:y,class:k.value};return e.grid===!0?l.push(Tt()):Object.assign(f,{class:[f.class,e.cardClass],style:e.cardStyle}),l.push(St(),xt()),e.loading===!0&&a.loading!==void 0&&l.push(a.loading()),r("div",f,l)}}});const Dl=["innerHTML","onClick"],Ll={__name:"SearchResult",props:{emissionData:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({rowsPerPage:10,page:1})}},emits:["update:pagination"],setup(e,{emit:a}){const t=It(),c=lt(),u=D({...e.pagination});function n(d,v,b){localStorage.setItem("userName",d),console.log(d,v,b),c.commit("setCurrentYear",v),c.commit("setCurrentMonth",b),t.push({path:"/detail"})}const g=a;j(u,d=>{g("update:pagination",d)});function m(d){switch(d){case"all":return"\u5168\u90E8\u8BA4\u8BC1";case"part":return"\u90E8\u5206\u8BA4\u8BC1";case"none":return"\u672A\u8BA4\u8BC1";default:return"\u672A\u77E5"}}function y(d){switch(d){case"all":return"green";case"part":return"orange";case"none":return"red";default:return"grey"}}const o=[{name:"enterpriseName",label:"\u516C\u53F8\u540D\u79F0",field:"Enterprise_name",sortable:!0},{name:"certified",label:"\u8BA4\u8BC1\u72B6\u6001",field:"certified",sortable:!0},{name:"combinedDate",label:"\u5E74/\u6708",align:"left",field:d=>`${d.year}-${d.month.toString().padStart(2,"0")}`,sortable:!0},{name:"emission1",label:"\u6392\u653E1",field:"emission1",sortable:!0},{name:"emission2",label:"\u6392\u653E2",field:"emission2",sortable:!0},{name:"emission3",label:"\u6392\u653E3",field:"emission3",sortable:!0},{name:"emissionAll",label:"\u603B\u6392\u653E",field:"emission_all",sortable:!0},{name:"offset",label:"\u78B3\u6392\u653E\u62B5\u6D88",field:"offset",sortable:!0}];return(d,v)=>(at(),nt(Fl,{rows:e.emissionData,columns:o,"row-key":"username",pagination:u.value,"onUpdate:pagination":v[0]||(v[0]=b=>u.value=b)},{"body-cell-enterpriseName":F(b=>[V(Ue,{props:b},{default:F(()=>[ge("div",{innerHTML:b.row.Enterprise_name,onClick:Ht(k=>n(b.row.username,b.row.year,b.row.month),["stop"])},null,8,Dl)]),_:2},1032,["props"])]),"body-cell-certified":F(b=>[V(Ue,{props:b},{default:F(()=>[V(Lt,{color:y(b.row.certified),style:{color:"white"}},{default:F(()=>[ot(Ut(m(b.row.certified)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"]))}},Ml={class:"q-pa-md row justify-center"},jl={class:"row justify-evenly items-center"},Ql={class:"row q-py-md justify-evenly"},la={__name:"SearchPage",setup(e){lt();const a=localStorage.getItem("bankToken"),t=D(""),c=[...Array(new Date().getFullYear()-1999).keys()].map(d=>2e3+d),i=Array.from({length:12},(d,v)=>v+1),u=Gt(),n=zt({year:null,month:null,page:1,pagelength:10,sortkey:{label:"\u603B\u6392\u653E\u91CF",value:"emission_all"},ascending:!1,certified:!1,searchkey:""}),g=[{label:"\u56FA\u5B9A\u71C3\u70E7",value:"fixburn"},{label:"\u79FB\u52A8\u71C3\u70E7",value:"movingburn"},{label:"\u8303\u56F4\u4E00\u6392\u653E",value:"emission1"},{label:"\u8D2D\u5165\u7535\u529B",value:"electricity"},{label:"\u8D2D\u5165\u70ED\u529B",value:"heating"},{label:"\u8303\u56F4\u4E8C\u6392\u653E",value:"emission2"},{label:"\u5458\u5DE5\u901A\u52E4",value:"commuting"},{label:"\u5458\u5DE5\u5DEE\u65C5",value:"travel"},{label:"\u8303\u56F4\u4E09\u6392\u653E",value:"emission3"},{label:"\u603B\u6392\u653E\u91CF",value:"emission_all"},{label:"\u78B3\u6392\u653E\u62B5\u6D88",value:"offset"}],m=D([]),y=D({page:1,rowsPerPage:10}),o=async()=>{console.log(a),console.log(n.sortkey);const d=new FormData;Object.keys(n).forEach(v=>{v!=="sortkey"&&d.append(v,n[v])}),d.append("sortkey",n.sortkey.value);try{const v=await Jt.post("http://47.122.24.142:7766/api/getinfoall",d,{headers:{Authorization:`Bearer ${a}`}});v.status===200?(m.value=v.data.data,console.log(m.value),y.value.page=v.data.page_max,console.log(y.value.page)):u.notify({color:"negative",message:"\u65E0\u6CD5\u83B7\u53D6\u6570\u636E"})}catch(v){console.error(v),u.notify({color:"negative",message:"\u8BF7\u6C42\u5931\u8D25"})}};return(d,v)=>(at(),nt(Yt,{padding:""},{default:F(()=>[ge("div",Ml,[V(Xt,{class:"col-10 row justify-center"},{default:F(()=>[V(Zt,{onSubmit:o,class:"col-12 q-pa-md"},{default:F(()=>[ge("div",jl,[V(Ot,{class:"text-h4"},{default:F(()=>[ot(" \u67E5\u8BE2\u4F01\u4E1A")]),_:1}),V(fe,{outlined:"",modelValue:n.year,"onUpdate:modelValue":v[0]||(v[0]=b=>n.year=b),options:W(c),label:"\u5E74\u4EFD",type:"number",class:"col-2",padding:""},{prepend:F(()=>[V(W(N),{name:"event"})]),_:1},8,["modelValue","options"]),V(fe,{outlined:"",modelValue:n.month,"onUpdate:modelValue":v[1]||(v[1]=b=>n.month=b),options:W(i),label:"\u6708\u4EFD",type:"number",class:"col-2",padding:""},{prepend:F(()=>[V(W(N),{name:"event"})]),_:1},8,["modelValue","options"]),V(fe,{outlined:"",modelValue:n.sortkey,"onUpdate:modelValue":v[2]||(v[2]=b=>n.sortkey=b),options:g,label:"\u6392\u5E8F\u5B57\u6BB5",class:"col-3",padding:""},null,8,["modelValue"])]),ge("div",Ql,[V(He,{modelValue:n.certified,"onUpdate:modelValue":v[3]||(v[3]=b=>n.certified=b),label:"\u4EC5\u663E\u793A\u5168\u90E8\u8BA4\u8BC1\u7684\u4F01\u4E1A",class:"col-2.8"},null,8,["modelValue"]),V(He,{modelValue:n.ascending,"onUpdate:modelValue":v[4]||(v[4]=b=>n.ascending=b),label:"\u5347\u5E8F\u6392\u5E8F",class:"col-2"},null,8,["modelValue"]),V(W(el),{modelValue:t.value,"onUpdate:modelValue":v[5]||(v[5]=b=>t.value=b),label:"\u4F01\u4E1A\u540D\u79F0",rounded:"",outlined:"",class:"col-4"},{append:F(()=>[V(W(N),{name:"search",class:"cursor-pointer"})]),_:1},8,["modelValue"]),V(ee,{label:"\u67E5\u8BE2",type:"submit",color:"primary",class:"col-2 q-px-md"})])]),_:1})]),_:1})]),V(Ll,{emissionData:m.value,pagination:y.value},null,8,["emissionData","pagination"])]),_:1}))}};export{la as default};
